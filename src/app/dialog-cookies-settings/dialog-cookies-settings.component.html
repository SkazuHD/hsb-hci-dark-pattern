<app-loading-spinner [showLoading]="loading"></app-loading-spinner>
<div class="p-3">
  <h1 class="text-center !text-3xl" mat-dialog-title>Datenschutzzentrum</h1>
  <div class="" mat-dialog-content>
    <p class="text-center">Hier k√∂nnen Sie Ihre Einstellungen zur Datenverarbeitung auf dieser Website anpassen.</p>
    <form [formGroup]="cookieForm" class="grid grid-cols-1 p-3 gap-6">
      <ng-container *ngFor="let controlName of cookieForm.controls | keyvalue">
        <div class="grid">
          <mat-slide-toggle (click)="onToggle()" [formControlName]="controlName.key"
                            color="primary">{{controlName.key}}</mat-slide-toggle>
          <ng-container *ngIf="getFormControlByName(controlName.key).touched">
            <mat-error *ngIf="getFormControlByName(controlName.key).status === 'INVALID'"
                       class="text-custom_scarlet text-xs">
              Dieses Feld ist erforderlich.
            </mat-error>
          </ng-container>
        </div>
      </ng-container>
    </form>
  </div>
  <div mat-dialog-actions>
    <div class="flex w-full justify-between">
      <button (click)="onCancel()" mat-flat-button>Close</button>
      <div>
        <button (click)="onSubmit()" color="primary" mat-flat-button>Ok</button>
        <button (click)="onAcceptAll()" class="!bg-green-600 !text-white" mat-flat-button>Alle Aktzeptieren</button>
      </div>
    </div>
  </div>
</div>
